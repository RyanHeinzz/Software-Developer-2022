<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Super Ryan</title>
	<link rel="stylesheet" href="">
</head>
<body>

	<canvas id="gc" width="400" height="400"></canvas>
	<script type="text/javascript">
	window.onload = function(){
		canv = document.getElementById("gc");
		ctx = canv.getContext('2d');
		document.addEventListener('keydown',keyPush);
		setInterval(game,1000/10);
	};
	px=py=10;
	gs=tc=20;
	ax=ay=15;
	xv=yv=0;
	tail=5;
	trail = [];

	function game()
	{
		px+=xv;
		py+=yv;

		if(px<0)
		{
			px = tc-1;
		}
		if(px>tc-1)
		{
			px = 0;
		}
		if(px<0)
		{
			px = tc-1;
		}
		if(px<0)
		{
			px = tc-1;
		}

		ctx.fillStyle = "Grey";
		ctx.fillRect(0,0,canv.width,canv.height);

		ctx.fillStyle = "blue";
		for(var i=0;i<trail.length;i++)
		{
			ctx.fillRect(trail[i].x*gs,trail[i].y*gs,gs-2,gs-2);
			if (trail[i].x == px && trail[i].y == py)
			{
				tail = 5;
			}
		}

		trail.push({ x:px,y:py});

		while(trail.length > tail)
		{
			trail.shift();
		}

		if (ax == px && ay == py)
		{
			tail++;
			ax = Math.floor(Math.random()*tc);
			ay = Math.floor(Math.random()*tc);
		}

		ctx.fillStyle = "yellow";
		ctx.fillRect(ax*gs,ay*gs,gs-2,gs-2);
	}

	function keyPush(evt)
	{
		switch(evt.keyCode)
		{
			case 37:
				xv=-1;yv=0;
				break;
			case 38:
				xv=0;yv=-1;
				break;
			case 39:
				xv=1;yv=0;
				break;
			case 40:
				xv=0;yv=1;
				break;
		}
	}
	</script>

</body>
</html>